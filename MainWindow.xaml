<Window x:Class="OOP_3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Морской Бой" Height="750" Width="1100"
        WindowStartupLocation="CenterScreen">

    <Window.InputBindings>
        <KeyBinding Key="R" Command="{Binding RotateShipCommand}"/>
    </Window.InputBindings>

    <Grid Background="#FFE8F4FF">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок и статус -->
        <Border Grid.Row="0" Background="#FF2E86AB" Padding="10" Margin="0,0,0,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding GameStatus}" FontSize="18" 
                           Foreground="White" FontWeight="Bold" HorizontalAlignment="Center"
                           VerticalAlignment="Center" TextWrapping="Wrap"/>

                <Button Grid.Column="1" Content="Подключиться к серверу" 
                        Command="{Binding ConnectCommand}" Width="150" Height="35" 
                        Background="#FFA3D8F4" BorderBrush="#FF1C6B97" FontWeight="SemiBold"/>
            </Grid>
        </Border>

        <!-- Игровые поля -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" 
                    HorizontalAlignment="Center" VerticalAlignment="Center"
                    Margin="20">

            <!-- Мое поле -->
            <Border Background="White" BorderBrush="#FF1C6B97" BorderThickness="2" 
                    CornerRadius="5" Padding="15" Margin="10">
                <StackPanel>
                    <TextBlock Text="Мое поле" FontSize="16" FontWeight="Bold"
                               Foreground="#FF1C6B97" HorizontalAlignment="Center" 
                               Margin="0,0,0,15"/>

                    <!-- Координаты -->
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Буквы сверху -->
                        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" 
                                    Margin="0,0,0,5">
                            <TextBlock Text="А" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Б" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="В" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Г" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Д" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Е" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Ж" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="З" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="И" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="К" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </StackPanel>

                        <!-- Цифры слева -->
                        <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Vertical" 
                                    Margin="0,0,5,0">
                            <TextBlock Text="1" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="2" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="3" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="4" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="5" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="6" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="7" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="8" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="9" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="10" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </StackPanel>

                        <!-- Игровое поле -->
                        <ItemsControl Grid.Row="1" Grid.Column="1" 
                                      ItemsSource="{Binding MyBoard.Cells}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Rows="10" Columns="10"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="#FF1C6B97" BorderThickness="1" 
                                            Width="30" Height="30" 
                                            Background="{Binding State, Converter={StaticResource CellToColorConverter}}">
                                        <Button Command="{Binding DataContext.CellClickCommand, 
                                                RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"
                                                Background="Transparent" BorderThickness="0"
                                                Cursor="Hand"/>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Поле противника -->
            <Border Background="White" BorderBrush="#FF1C6B97" BorderThickness="2" 
                    CornerRadius="5" Padding="15" Margin="10">
                <StackPanel>
                    <TextBlock Text="Поле противника" FontSize="16" FontWeight="Bold"
                               Foreground="#FF1C6B97" HorizontalAlignment="Center" 
                               Margin="0,0,0,15"/>

                    <!-- Координаты -->
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Буквы сверху -->
                        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" 
                                    Margin="0,0,0,5">
                            <TextBlock Text="А" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Б" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="В" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Г" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Д" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Е" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="Ж" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="З" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="И" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="К" Width="30" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </StackPanel>

                        <!-- Цифры слева -->
                        <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Vertical" 
                                    Margin="0,0,5,0">
                            <TextBlock Text="1" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="2" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="3" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="4" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="5" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="6" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="7" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="8" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="9" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            <TextBlock Text="10" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </StackPanel>

                        <!-- Игровое поле -->
                        <ItemsControl Grid.Row="1" Grid.Column="1" 
                                      ItemsSource="{Binding EnemyBoard.Cells}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Rows="10" Columns="10"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="#FF1C6B97" BorderThickness="1" 
                                            Width="30" Height="30"
                                            Background="{Binding State, Converter={StaticResource CellToColorConverter}}">
                                        <Button Command="{Binding DataContext.CellClickCommand, 
                                                RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"
                                                Background="Transparent" BorderThickness="0"
                                                Cursor="Hand"/>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Легенда -->
        <Border Grid.Row="2" Background="#FFD4EDDA" BorderBrush="#FFC3E6CB" 
                BorderThickness="1" Margin="20,10" Padding="10" CornerRadius="5">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <StackPanel Orientation="Horizontal" Margin="0,0,20,0">
                    <Border Width="20" Height="20" Background="LightBlue" BorderBrush="#FF1C6B97" BorderThickness="1" Margin="0,0,5,0"/>
                    <TextBlock Text="Пусто" VerticalAlignment="Center" Margin="0,0,15,0"/>

                    <Border Width="20" Height="20" Background="Gray" BorderBrush="#FF1C6B97" BorderThickness="1" Margin="0,0,5,0"/>
                    <TextBlock Text="Корабль" VerticalAlignment="Center" Margin="0,0,15,0"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,0,20,0">
                    <Border Width="20" Height="20" Background="White" BorderBrush="#FF1C6B97" BorderThickness="1" Margin="0,0,5,0"/>
                    <TextBlock Text="Промах" VerticalAlignment="Center" Margin="0,0,15,0"/>

                    <Border Width="20" Height="20" Background="Red" BorderBrush="#FF1C6B97" BorderThickness="1" Margin="0,0,5,0"/>
                    <TextBlock Text="Попадание" VerticalAlignment="Center" Margin="0,0,15,0"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <Border Width="20" Height="20" Background="DarkRed" BorderBrush="#FF1C6B97" BorderThickness="1" Margin="0,0,5,0"/>
                    <TextBlock Text="Потоплен" VerticalAlignment="Center"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Управление -->
        <Border Grid.Row="3" Background="#FFF8F9FA" BorderBrush="#DEE2E6" 
                BorderThickness="1,1,0,0" Padding="15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="🎯 Готов" Command="{Binding ReadyCommand}" 
                        Width="120" Height="35" Margin="5"
                        Background="#FF28A745" Foreground="White" FontWeight="Bold"
                        BorderBrush="#FF1E7E34"/>

                <Button Content="🤖 Авторасстановка" Command="{Binding AutoPlaceCommand}" 
                        Width="140" Height="35" Margin="5"
                        Background="#FF17A2B8" Foreground="White" FontWeight="Bold"
                        BorderBrush="#FF138496"/>

                <Button Content="🔄 Повернуть (R)" Command="{Binding RotateShipCommand}" 
                        Width="130" Height="35" Margin="5"
                        Background="#FF6C757D" Foreground="White" FontWeight="Bold"
                        BorderBrush="#FF545B62"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>